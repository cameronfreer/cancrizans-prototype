name: Auto Label PRs

on:
  pull_request:
    types: [opened, synchronize, reopened]

permissions:
  contents: read
  pull-requests: write

jobs:
  label:
    name: Auto-label Pull Request
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Label based on changed files
        uses: actions/labeler@v5
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          configuration-path: .github/labeler.yml

  size-label:
    name: Label PR Size
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Label PR size
        uses: codelytv/pr-size-labeler@v1
        with:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          xs_label: 'size/xs'
          xs_max_size: 10
          s_label: 'size/s'
          s_max_size: 100
          m_label: 'size/m'
          m_max_size: 500
          l_label: 'size/l'
          l_max_size: 1000
          xl_label: 'size/xl'
          fail_if_xl: 'false'
          message_if_xl: 'This PR is very large. Consider breaking it into smaller PRs for easier review.'
          files_to_ignore: |
            package-lock.json
            yarn.lock
            poetry.lock
            *.min.js
            *.min.css

  greet-first-time-contributor:
    name: Greet First-Time Contributors
    runs-on: ubuntu-latest
    steps:
      - name: Greet contributor
        uses: actions/first-interaction@v1
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          issue-message: |
            ðŸ‘‹ Welcome to Cancrizans! Thank you for opening your first issue.

            We appreciate your contribution to the project. A maintainer will review your
            issue and respond as soon as possible.

            In the meantime, please ensure you've provided:
            - Clear description of the issue or feature request
            - Steps to reproduce (for bugs)
            - Your environment details (Python version, OS, etc.)

            Feel free to explore our [Contributing Guide](CONTRIBUTING.md) to learn more
            about the project! ðŸŽµ

          pr-message: |
            ðŸ‘‹ Welcome to Cancrizans! Thank you for opening your first pull request!

            We're excited to have your contribution. Here's what happens next:

            1. **Automated Checks**: Our CI will run tests, linting, and security scans
            2. **Review**: A maintainer will review your changes
            3. **Feedback**: We may suggest some improvements
            4. **Merge**: Once approved, we'll merge your PR! ðŸŽ‰

            **Tips for a smooth review:**
            - âœ… Ensure all tests pass
            - âœ… Update documentation if needed
            - âœ… Add tests for new features
            - âœ… Follow our [code style guidelines](CONTRIBUTING.md)

            Thank you for contributing to open source! ðŸŽµ

  auto-assign:
    name: Auto-assign Reviewers
    runs-on: ubuntu-latest
    steps:
      - name: Auto-assign reviewers
        uses: kentaro-m/auto-assign-action@v2.0.0
        with:
          configuration-path: '.github/auto-assign.yml'
